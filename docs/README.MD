# üì¶ CN_Proyecto_Pideky ‚Äì Paquete de Documentaci√≥n

Este documento re√∫ne, listo para copiar/pegar como archivos del repo, una documentaci√≥n est√°ndar basada en tu patr√≥n **config.yml** / **editable.yml**, tu estructura de carpetas (Controllers, Scripts, Utils, Insumos, Resultados, static, etc.) y tus `.bat` de ejecuci√≥n.

> Sugerencia de ubicaci√≥n: crea una carpeta `docs/` para las gu√≠as y deja `README.md`, `CHANGELOG.md` y `CONTRIBUTING.md` en la ra√≠z.

---

## 1) `README.md`

```markdown
# CN_Proyecto_Pideky

Automatizaci√≥n de ETL y postprocesos para informes de ventas Pideky (Comercial Nutresa), usando Python y configuraci√≥n por YAML. El flujo toma **Insumos** (archivos Excel/CSV), aplica transformaciones y reglas, y genera **Resultados** estandarizados (Descargable desde la interfaz de streamlit.)

## üöÄ Caracter√≠sticas
- Configuraci√≥n externa (YAML): separaci√≥n **config.yml** (n√∫cleo) y **editable.yml** (ajustes del usuario).
- Procesamiento por m√≥dulos (`Controllers/`, `Utils/`, `Scripts/`).
- Ejecutables por `.bat` para Windows (entorno embebido o venv).
- Salidas reproducibles en `Resultados/`.

## üìÅ Estructura
```
| Ruta/Elemento           | Tipo    | Descripci√≥n breve                                    |
| ----------------------- | ------- | ---------------------------------------------------- |
| `Controllers/`          | Carpeta | Orquestaci√≥n y l√≥gica por pasos                      |
| `Scripts/`              | Carpeta | Puntos de entrada y automatizaciones (CLI/Batch)     |
| `Utils/`                | Carpeta | Funciones reutilizables (I/O, validaciones, helpers) |
| `Insumos/`              | Carpeta | Archivos de entrada *(no versionar)*                 |
| `Resultados/`           | Carpeta | Archivos de salida *(no versionar)*                  |
| `static/`               | Carpeta | Recursos est√°ticos (logos, CSS, etc.)                |
| `Img/`                  | Carpeta | Im√°genes/diagramas                                   |
| `.gitignore`            | Archivo | Reglas de exclusi√≥n de versionado                    |
| `requirements.txt`      | Archivo | Dependencias de Python                               |
| `editable.yml`          | Archivo | Configuraci√≥n editable por el usuario                |
| `iniciar.bat`           | Archivo | Preparaci√≥n del entorno e instalaci√≥n                |
| `ejecutar.bat`          | Archivo | Ejecuci√≥n del flujo principal                        |
| `conversor_insumos.bat` | Archivo | Automatizaci√≥n para conversi√≥n de insumos            |
```

## üîß Requisitos
- Windows 10/11 o Linux/macOS (opcional)
- Python 3.10‚Äì3.12 (o **entorno embebido** provisto)

## üõ†Ô∏è Instalaci√≥n
**Opci√≥n A ‚Äì Entorno embebido (recomendado en Windows):**
1. Descomprime `python-3.12.5-emb.zip` en la ra√≠z del proyecto.
2. Ejecuta `iniciar.bat` (crea/activa entorno y dependencias) y luego `ejecutar.bat`.

**Opci√≥n B ‚Äì Virtualenv:**
```bat
python -m venv .venv
.venv\Scripts\activate
pip install -r requirements.txt
```

## ‚öôÔ∏è Configuraci√≥n por YAML
- `config.yml`: rutas y constantes **internas** (no tocar en uso normal).
- `editable.yml`: par√°metros **de usuario** (columnas ajustables). 
Las rutas de insumos se obtienen automaticamente de manera recursiva. Solo basta con generar los archivos utilizando **conversor_insumos.bat**
> Ver `docs/CONFIGURACION.md` para el detalle de claves y ejemplos.

## ‚ñ∂Ô∏è Ejecuci√≥n
- **Batch**: doble clic en `ejecutar.bat`.
- **CLI** (ejemplo gen√©rico):
```bat
.venv\Scripts\activate
python Scripts/main.py --modo produce --periodo 2025-01
```
- **Streamlit** (si aplica):
```bat
.venv\Scripts\activate
streamlit run Scripts/app.py
```


##  Licencia
MIT License

Copyright (c) 2025 Daniel Jaramillo Bustamante - XpertGroup.sas

daniel.jaramillo@xpertgroup.co


---

## 2) `docs/CONFIGURACION.md`

```markdown
# Gu√≠a de configuraci√≥n (editable.yml)

Este proyecto separa configuraci√≥n **interna** config.yml de **editable** (usuario).

## `config.yml` (interno/protegido)
**Objetivo:** rutas base, nombres ‚Äúoficiales‚Äù, columnas can√≥nicas, y banderas de ejecuci√≥n por defecto.
```

## `editable.yml` (usuario)
**Objetivo:** seleccionar formato final de resultados. (Columnas para agrupar y sumar en la base filtrada final.)

### Buenas pr√°cticas
- Mant√©n `config.yml` **inmutable** 
- Deja `editable.yml` con **valores por defecto** 

## 3) `docs/USO.md`

## Gu√≠a de uso
## 1) Preparar Insumos
1. Utiliza el archivo **conversor_insumos.bat** para generar insumos necesarios para la automatizaci√≥n. 

2. Verifica pesta√±as/hojas esperadas y tipos de datos (fechas, num√©ricos).

## 2) Configurar
- Edita `editable.yml` con las columnas que quieras agrupar sigueindo la lista de columnas propuestas. 


---
##  ejemplo  contenido editable.yml:  

```yaml
# Ejemplo 1. Tiempo x Canal x Marca
columnas_finales_agrupaci√≥n:
  group:
    - Tiempo x Canal x Marca
    - "Canal"
    - "Sub Canal"
    - "Marca"
  sum:
    - "Venta act $"
    - "Venta act Und"
    - "Venta act kg"
```
---

```yaml
# Ejemplo 2 ‚Äì Cliente x Regi√≥n x Oficina
columnas_finales_agrupaci√≥n:
  group:
    - "Cod Cliente"
    - "Nom Cliente"
    - "Regi√≥n"
    - "Oficina de ventas"
    - "Municipio"
  sum:
    - "Venta act $"
    - "Venta act Und"
    - "Venta act kg"
```
---
```yaml
# Ejemplo 3 ‚ÄìEjemplo 3 ‚Äì Producto x Categor√≠a x Atenci√≥n 

# Suma unicamente por $ y Und.

columnas_finales_agrupaci√≥n:
  group:
    - "Cod Material"
    - "Desc Material"
    - "Categor√≠a"
    - "Sub Categor√≠a"
    - "L√≠nea"
    - "Modelo de atenci√≥n"
  sum:
    - "Venta act $"
    - "Venta act Und"
```


## 3) Ejecutar
- **Windows (embebido/venv)**: usa `ejecutar.bat`.
- **L√≠nea de comando** (ejemplo gen√©rico):
```bat
  python Scripts/main.py --periodo 2025-01 --exportar_csv
```

## 4) Resultados
- Archivos consolidados en `Resultados/` clientes_sin_ccup.xlsx 
Archivo que contiene los c√≥digos que no cruzaron inicialmente. 

--- 

## Capas
- **Utils**: lectura/escritura (Excel, CSV), normalizaci√≥n, validaciones, tipado.
- **Controllers**: procesa configuraci√≥n del proyecto ordena pasos del pipeline (lectura ‚Üí transform ‚Üí exportaci√≥n).
- **Scripts**: puntos de entrada (CLI/GUI/Batch).

## Decisiones (ADR breve)
- **YAML externo**: separar `config.yml` (protecci√≥n) vs `editable.yml` (usuario) para trazabilidad.
- **Estructura Insumos/Resultados**: no versionar archivos pesados ‚Üí reproducibilidad y repos livianos.
```

---
